/*! Heimdall - v0.0.1 - 2013-12-10
* https://github.com/mizuki/Heimdall
* Copyright (c) 2013 mizuki_r; Licensed MIT */
var Heimdall=function(){"use strict";var a=Object.prototype.toString,b=function(a){if(!a||"object"!=typeof a)throw new TypeError("rules are invalid object");this.rules=a,this.columns=[],this.constraints=null;for(var b in this.rules)this.columns.push(b)};return b.prototype.validate=function(a,b){var c=this.create_result();if(this.constraints||this.load_constraints(Heimdall.CONSTRAINTS.DEFAULTS),"object"==typeof a){var d=a,e=this;e.columns.forEach(function(a){e.validate_input(c,a,d[a])})}else this.validate_input(c,a,b);return c},b.prototype.validate_input=function(b,c,d){var e=this;return this.rules[c].forEach(function(f){var g;"[object Array]"===a.call(f)&&(g=f[1],f=f[0]),e.constraints[f](d,g)||b.set_error(c,f,d)}),this},b.prototype.create_result=function(){return new Heimdall.Result({rules:this.rules})},b.prototype.load_constraints=function(a,b){var c={};return"object"!=typeof a||b?c[a]=b:c=a,this.constraints=$.extend(this.constraints||{},c),this},b}();Heimdall.DEFAULTS={},Heimdall.CONSTRAINTS={},Heimdall.Result=function(){"use strict";var a=function(a){this.rules=a.rules,this.errors=[]};return a.prototype.has_error=function(){return this.errors.length>0?!0:!1},a.prototype.get_errors=function(){return this.has_error()?this.errors:null},a.prototype.get_error=function(a,b){if(this.has_error()){var c=$.map(this.errors,function(c){return c.column===a&&c.method===b?c:null});return c&&c.length>0?c[0]:null}return null},a.prototype.exists_column=function(a){return this.rules[a]?!0:!1},a.prototype.set_error=function(a,b,c){if(this.exists_column(a)){var d={column:a,method:b,value:c};return this.errors.push(d),d}},a}(),function(){"use strict";Heimdall.CONSTRAINTS.DEFAULTS={required:function(a){return a&&a.length>0?!0:!1},length:function(a,b,c){return b<=a.length&&a.length<=c?!0:!1},select:function(a,b){for(var c=-1,d=b?b.length:0;++c<d;)if(b[c]===a)return!0;return!1},"int":function(a){return isFinite(a)?!0:!1}}}(),function(){"use strict";$.heimdall=function(a){return new Heimdall(a)}}();